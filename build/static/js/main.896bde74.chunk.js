(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(79)},43:function(e,t,n){},45:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(83),c=n(29),l=n.n(c),i=(n(43),n(84)),s=n(85),u=n(13),d=n(2),m=n(3),h=n(5),p=n(4),f=n(6),g=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:"./images/logo.jpg",alt:"logo prizoners",style:{width:"50%",height:"50%",padding:"20px 0"}}))}}]),t}(a.Component),v=(n(45),n(7)),b=n.n(v),E=n(30),y=n.n(E),x=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",redirect:!1},n.login=function(){b.a.post("http://localhost:3333/login",{username:n.state.username,password:n.state.password}).then(function(e){console.log(e),localStorage.setItem("token",e.data.token);var t=y()(localStorage.getItem("token"));console.log(t),localStorage.setItem("isAdmin",t.admin),localStorage.setItem("username",t.username),n.setState({redirect:!0}),n.state.redirect&&"true"===localStorage.getItem("isAdmin")?n.props.history.push("/all"):n.props.history.push("/mycards"),window.location.reload()}).catch(function(e){console.log(e)})},n.handleChange=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement(g,null),r.a.createElement("input",{onChange:this.handleChange,value:this.state.username,className:"loginInput",type:"text",name:"username",placeholder:"enter your username",required:!0}),r.a.createElement("input",{onChange:this.handleChange,value:this.state.password,className:"loginInput",name:"password",type:"password",placeholder:"enter your password",required:!0}),r.a.createElement("button",{onClick:this.login},"LOGIN"))}}]),t}(a.Component),O=n(31),w=n(8),j=n(9);function C(){var e=Object(w.a)(["\n  color: red;\n  border: 3px solid red;\n"]);return C=function(){return e},e}function k(){var e=Object(w.a)(["\n  color: white;\n  border: 3px solid white;\n  border-radius: 10px;\n  margin: 0 5px;\n  width: 40%;\n  height: 40px;\n  font-size: 18px;\n  line-height: 40px;\n"]);return k=function(){return e},e}function S(){var e=Object(w.a)(["\n  background-color: #2c3e50;\n  color: white;\n  bottom: 0;\n  padding: 5px;\n  display: flex;\n  justify-content: space-around;\n"]);return S=function(){return e},e}function A(){var e=Object(w.a)(["\n  width: 90%;\n  color: black;\n  font-size: 12px;\n  background-color: white;\n  max-height: ",";\n  height: auto;\n  overflow: hidden;\n  padding: 5%;\n"]);return A=function(){return e},e}function D(){var e=Object(w.a)(["\n  background-color: #e67e22;\n  text-transform: uppercase;\n"]);return D=function(){return e},e}function W(){var e=Object(w.a)(["\n  background-color: #2c3e50;\n  width: 100%;\n  margin: 0 auto;\n  font-size: 16px;\n  color: white;\n  padding: 5px 0;\n"]);return W=function(){return e},e}function N(){var e=Object(w.a)(["\n  width: 100%;\n  height: auto;\n  border: 1px solid white;\n  border-radius: 15px;\n  overflow: hidden;\n"]);return N=function(){return e},e}var I=j.a.div(N()),z=j.a.h2(W()),L=Object(j.a)(z)(D()),U=j.a.div(A(),function(e){return e.isOpen?"500px":"50px"}),_=j.a.div(S()),q=j.a.div(k()),H=Object(j.a)(q)(C()),M=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},n.showDetails=function(){n.setState({isOpen:!n.state.isOpen})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){console.log("local storage isAdmin",!("true"!==localStorage.getItem("isAdmin")));var e=this.props,t=e.title,n=e.text,a=e.status,o=e.id,c=e.onDelete,l=e.changeStatus;return r.a.createElement(I,null,r.a.createElement(z,null,t),"true"===localStorage.getItem("isAdmin")?r.a.createElement(L,{onClick:function(){l(o)}},a,r.a.createElement("img",{src:"/images/arrow.svg",alt:"arrow",style:{height:"14px",marginLeft:"20px"}})):r.a.createElement(L,null,a),r.a.createElement(U,{isOpen:this.state.isOpen},n),r.a.createElement(_,null,r.a.createElement(q,{onClick:this.showDetails},"View"),r.a.createElement(H,{onClick:function(){return c(o)}},"Remove")))}}]),t}(a.Component),B=n(81),R=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"logout",value:function(){localStorage.clear(),window.location.href="/"}},{key:"render",value:function(){return r.a.createElement("nav",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",fontSize:"26px",minHeight:"64px",lineHeight:"64px",position:"relative",backgroundColor:"#e67e22",color:"#ddd"}},r.a.createElement("div",{style:{minWidth:"320px",color:"white"}},r.a.createElement("strong",null,"Welcome ",localStorage.username)),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/all"},"Home")),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/register"},"Add User")),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/newcard"},"Add Card")),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/mycards",onClick:this.logout},"Logout")))}}]),t}(a.Component);n(70);function F(){var e=Object(w.a)(["\n  min-width: 280px;\n  width: 22%;\n  margin: 10px auto;\n"]);return F=function(){return e},e}function G(){var e=Object(w.a)(["\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n  min-width: 300px;\n  margin: 0 auto;\n"]);return G=function(){return e},e}function J(){var e=Object(w.a)(['\n  width: "90%";\n  height: auto;\n  font-size: 20px;\n  padding: 0;\n  margin: 20px auto;\n']);return J=function(){return e},e}var P=j.a.div(J()),K=j.a.div(G()),T=j.a.div(F()),V=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={cards:[],statuses:["to validate","to do","doing","done"]},n.handleDelete=function(e){console.log(e),b.a.delete("http://localhost:3333/".concat(e),{}).then(function(e){alert("card deleted"),n.componentWillMount()}).catch(function(e){console.log(e)})},n.changeStatus=function(e){var t;n.setState({cards:n.state.cards.map(function(a){var r=n.state.statuses.findIndex(function(e){return e===a.status});return e===a._id&&(t=n.state.statuses[(r+1)%4]),e===a._id?Object(O.a)({},a,{status:t}):a})},function(){b.a.put("http://localhost:3333/".concat(e),{status:t}).then(function(e){console.log("card updated posted to back, response",e)}).catch(function(e){console.log(e)})})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.a.get("http://localhost:3333/all").then(function(t){console.log("response usercards",t),e.setState({cards:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t={};return this.state.statuses.forEach(function(n){t[n]=e.state.cards.filter(function(e){return e.status===n}).map(function(t){return r.a.createElement(M,{key:t._id,id:t._id,title:t.title,text:t.text,status:t.status,onDelete:e.handleDelete,changeStatus:e.changeStatus})})}),r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement("h2",{style:{fontFamily:"Permanent Marker, cursive"}},"Admin Cards"),r.a.createElement(P,null,r.a.createElement(K,null,this.state.statuses.map(function(e,n){return r.a.createElement(T,{key:n,className:"column",id:n},e.charAt(0).toUpperCase()+e.slice(1),t[e])}))))}}]),t}(a.Component),Q=(n(72),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"logout",value:function(){localStorage.clear(),window.location.href="/"}},{key:"render",value:function(){return r.a.createElement("nav",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",fontSize:"26px",minHeight:"64px",lineHeight:"64px",position:"relative",backgroundColor:"#e67e22",color:"#ddd"}},r.a.createElement("div",{style:{minWidth:"320px",color:"white"}},r.a.createElement("strong",null,"Welcome ",localStorage.username)),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/mycards"},"Home")),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/newcard"},"Add Card")),r.a.createElement("div",{style:{minWidth:"220px"}},r.a.createElement(B.a,{style:{textDecoration:"none",color:"rgb(255, 196, 4)"},to:"/mycards",onClick:this.logout},"Logout")))}}]),t}(a.Component));function X(){var e=Object(w.a)(["\n  font-family: Permanent Marker, cursive;\n"]);return X=function(){return e},e}function Y(){var e=Object(w.a)(["\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n  min-width: 300px;\n  margin: 0 auto;\n  width: 90%;\n  margin: 0 5%;\n  justify-content: space-between;\n"]);return Y=function(){return e},e}function Z(){var e=Object(w.a)(["\n  width: 320px;\n  margin: 10px auto;\n"]);return Z=function(){return e},e}var $=j.a.div(Z()),ee=j.a.div(Y()),te=j.a.h1(X()),ne=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={cards:[],isUser:!1},n.handleDelete=function(e){b.a.delete("http://localhost:3333/".concat(e),{}).then(function(e){alert("card deleted"),n.componentWillMount()}).catch(function(e){console.log(e)})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.a.get("http://localhost:3333/mycards").then(function(t){console.log("response usercards",t),e.setState({cards:t.data}),localStorage.token&&e.setState({isUser:!0})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.cards.map(function(t){return r.a.createElement($,{key:t._id},r.a.createElement(M,{key:t._id,id:t._id,title:t.title,text:t.text,status:t.status,onDelete:e.handleDelete}))});return r.a.createElement("div",null,r.a.createElement(Q,null),r.a.createElement(te,null,"User Cards"),r.a.createElement(ee,null,t))}}]),t}(a.Component),ae=(n(74),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={err:"",userCreate:"",username:"",password:""},n.handleOnSubmit=function(e){e.preventDefault(),n.setState({err:"",userCreate:""});var t={username:n.state.username,password:n.state.password};b.a.post("http://localhost:3333/register",t).then(function(e){console.log("in then",e),n.setState({userCreate:e.data.username,username:"",password:""})}).catch(function(e){console.log("in error",e),n.setState({err:"User already exists"})})},n.handleOnChange=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"register"},r.a.createElement("h1",{className:"reg"},"New User"),r.a.createElement("form",{onSubmit:this.handleOnSubmit},r.a.createElement("input",{name:"username",type:"text",placeholder:"enter username",value:this.state.username,onChange:this.handleOnChange,required:!0}),r.a.createElement("input",{name:"password",type:"password",placeholder:"enter password",value:this.state.password,onChange:this.handleOnChange,required:!0}),r.a.createElement("button",{type:"submit"},"Register"),this.state.userCreate?r.a.createElement("div",{style:{color:"white"}},"User ".concat(this.state.userCreate," created")):"",this.state.err?r.a.createElement("div",{style:{color:"white"}},this.state.err):"",r.a.createElement("hr",null)))))}}]),t}(a.Component)),re=(n(76),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={cardCreate:"",err:"",title:"",text:"",status:""},n.handleOnSubmit=function(e){e.preventDefault();var t={title:n.state.title,text:n.state.text};console.log(t),b.a.post("http://localhost:3333/add",t).then(function(e){console.log("in then",e),n.setState({cardCreate:"La carte a \xe9t\xe9 cr\xe9\xe9e",title:"",text:"",status:"",err:""})}).catch(function(e){n.setState({err:"La card existe deja",cardCreate:""})})},n.handleOnChange=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"true"===localStorage.isAdmin?r.a.createElement(R,null):r.a.createElement(Q,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"register"},r.a.createElement("h1",{className:"reg"},"New Card"),r.a.createElement("form",{onSubmit:this.handleOnSubmit},r.a.createElement("input",{name:"title",type:"text",placeholder:"enter title",value:this.state.title,onChange:this.handleOnChange,required:!0}),r.a.createElement("textarea",{name:"text",type:"text",placeholder:"enter text",value:this.state.text,onChange:this.handleOnChange,required:!0}),r.a.createElement("button",{type:"submit"},"Register"),this.state.cardCreate?r.a.createElement("div",{style:{color:"white"}},"La card a \xe9t\xe9 cr\xe9e"):"",this.state.err?r.a.createElement("div",{style:{color:"white"}},this.state.err):"",r.a.createElement("hr",null)))))}}]),t}(a.Component)),oe=n(34),ce=n(82),le=function(e){var t=e.component,n=Object(oe.a)(e,["component"]);return r.a.createElement(s.a,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(ce.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ie=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h2",null,"No match found for ",r.a.createElement("code",null,t.pathname)),r.a.createElement(B.a,{to:"/"},r.a.createElement("button",{style:{background:"black",color:"#F8A907",fontSize:"24px"}},"BACK TO LOGIN")))},se=function(e){e?b.a.defaults.headers.common.Bearer=e:delete b.a.defaults.headers.common.Bearer};localStorage.token&&se(localStorage.token);var ue=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:x}),r.a.createElement(le,{exact:!0,path:"/all",component:V}),r.a.createElement(le,{exact:!0,path:"/mycards",component:ne}),r.a.createElement(le,{exact:!0,path:"/register",component:ae}),r.a.createElement(le,{exact:!0,path:"/newcard",component:re}),r.a.createElement(s.a,{component:ie})))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(ue,null)),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.896bde74.chunk.js.map