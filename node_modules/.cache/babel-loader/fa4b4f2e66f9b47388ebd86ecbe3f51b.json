{"ast":null,"code":"import _defineProperty from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/valentino/Bureau/app-ticket/client/src/components/LOGIN/Login.js\";\nimport React, { Component } from \"react\";\nimport Logo from \"../LOGO/Logo\";\nimport \"./login.css\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      password: \"\",\n      redirect: false\n    };\n\n    _this.login = function () {\n      axios.post(\"http://localhost:3333/login\", {\n        username: _this.state.username,\n        password: _this.state.password\n      }).then(function (response) {\n        console.log(response);\n        localStorage.setItem(\"token\", response.data.token);\n        var decoded = jwt_decode(localStorage.getItem(\"token\"));\n        console.log(decoded);\n        localStorage.setItem(\"isAdmin\", decoded.admin);\n        localStorage.setItem(\"username\", decoded.username);\n\n        _this.setState({\n          redirect: true\n        });\n\n        _this.state.redirect && localStorage.getItem(\"isAdmin\") === \"true\" ? _this.props.history.push(\"/all\") : _this.props.history.push(\"/mycards\");\n        window.location.reload();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.handleChange,\n        value: this.state.username,\n        className: \"loginInput\",\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"enter your username\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.handleChange,\n        value: this.state.password,\n        className: \"loginInput\",\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"enter your password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"LOGIN\"));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/valentino/Bureau/app-ticket/client/src/components/LOGIN/Login.js"],"names":["React","Component","Logo","axios","jwt_decode","Login","state","username","password","redirect","login","post","then","response","console","log","localStorage","setItem","data","token","decoded","getItem","admin","setState","props","history","push","window","location","reload","catch","error","handleChange","e","target","name","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Logo from \"../LOGO/Logo\";\nimport \"./login.css\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nclass Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    redirect: false\n  };\n\n  login = () => {\n    axios\n      .post(\"http://localhost:3333/login\", {\n        username: this.state.username,\n        password: this.state.password\n      })\n      .then(response => {\n        console.log(response);\n        localStorage.setItem(\"token\", response.data.token);\n        const decoded = jwt_decode(localStorage.getItem(\"token\"));\n        console.log(decoded);\n        localStorage.setItem(\"isAdmin\", decoded.admin);\n        localStorage.setItem(\"username\", decoded.username);\n        this.setState({ redirect: true });\n        this.state.redirect && localStorage.getItem(\"isAdmin\") === \"true\"\n          ? this.props.history.push(\"/all\")\n          : this.props.history.push(\"/mycards\");\n        window.location.reload();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"login\">\n        <Logo />\n        <input\n          onChange={this.handleChange}\n          value={this.state.username}\n          className=\"loginInput\"\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"enter your username\"\n          required\n        />\n        <input\n          onChange={this.handleChange}\n          value={this.state.password}\n          className=\"loginInput\"\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"enter your password\"\n          required\n        />\n        <button onClick={this.login}>LOGIN</button>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}