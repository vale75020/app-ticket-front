{"ast":null,"code":"import _objectSpread from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/valentino/Bureau/app-ticket/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/valentino/Bureau/app-ticket/client/src/components/ADMINCARDS/AdminCards.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  min-width: 280px;\\n  width: 22%;\\n  margin: 10px auto;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 0;\\n  display: flex;\\n  flex-wrap: wrap;\\n  min-width: 300px;\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: \\\"90%\\\";\\n  height: auto;\\n  font-size: 20px;\\n  padding: 0;\\n  margin: 20px auto;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport UserCard from \"../USERCARD/UserCard\";\nimport AdminLayout from \"../ADMINLAYOUT/AdminLayout\";\nimport \"./AdminCards.css\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nvar Container = styled.div(_templateObject());\nvar Grid = styled.div(_templateObject2());\nvar Cell = styled.div(_templateObject3());\n\nvar AdminCards =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AdminCards, _Component);\n\n  function AdminCards() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AdminCards);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AdminCards)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cards: [],\n      statuses: [\"to validate\", \"to do\", \"doing\", \"done\"]\n    };\n\n    _this.handleDelete = function (id) {\n      console.log(id);\n      axios.delete(\"http://localhost:3333/\".concat(id), {}).then(function (response) {\n        alert(\"card deleted\");\n\n        _this.componentWillMount();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.changeStatus = function (cardId) {\n      var statusCard;\n\n      _this.setState({\n        cards: _this.state.cards.map(function (x) {\n          var previousIndex = _this.state.statuses.findIndex(function (y) {\n            return y === x.status;\n          });\n\n          if (cardId === x._id) {}\n\n          return cardId === x._id ? _objectSpread({}, x, {\n            status: _this.state.statuses[(previousIndex + 1) % 4]\n          }) : x;\n        })\n      }, function () {\n        axios.put(\"http://localhost:3333/\".concat(cardId), {\n          status: statusCard\n        }).then(function (response) {\n          console.log(\"card updated posted to back, la réponse\", response);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AdminCards, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      axios.get(\"http://localhost:3333/all\").then(function (response) {\n        console.log(\"response usercards\", response);\n\n        _this2.setState({\n          cards: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var displayStatus = {};\n      this.state.statuses.forEach(function (status) {\n        displayStatus[status] = _this3.state.cards.filter(function (card) {\n          return card.status === status;\n        }).map(function (card) {\n          return React.createElement(UserCard, {\n            key: card._id,\n            id: card._id,\n            title: card.title,\n            text: card.text,\n            status: card.status,\n            onDelete: _this3.handleDelete,\n            changeStatus: _this3.changeStatus,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          });\n        });\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(AdminLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        style: {\n          fontFamily: \"Permanent Marker, cursive\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Admin Cards\"), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, this.state.statuses.map(function (status, index) {\n        return React.createElement(Cell, {\n          className: \"column\",\n          id: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, status.charAt(0).toUpperCase() + status.slice(1), displayStatus[status]);\n      }))));\n    }\n  }]);\n\n  return AdminCards;\n}(Component);\n\nexport default AdminCards;","map":{"version":3,"sources":["/home/valentino/Bureau/app-ticket/client/src/components/ADMINCARDS/AdminCards.js"],"names":["React","Component","UserCard","AdminLayout","axios","styled","Container","div","Grid","Cell","AdminCards","state","cards","statuses","handleDelete","id","console","log","delete","then","response","alert","componentWillMount","catch","error","changeStatus","cardId","statusCard","setState","map","x","previousIndex","findIndex","y","status","_id","put","get","data","displayStatus","forEach","filter","card","title","text","fontFamily","index","charAt","toUpperCase","slice"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport UserCard from \"../USERCARD/UserCard\";\nimport AdminLayout from \"../ADMINLAYOUT/AdminLayout\";\nimport \"./AdminCards.css\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\n\n\nconst Container = styled.div`\n  width: \"90%\";\n  height: auto;\n  font-size: 20px;\n  padding: 0;\n  margin: 20px auto;\n`;\n\nconst Grid = styled.div`\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n  min-width: 300px;\n  margin: 0 auto;\n`;\n\nconst Cell = styled.div`\n  min-width: 280px;\n  width: 22%;\n  margin: 10px auto;\n`;\n\nclass AdminCards extends Component {\n  state = {\n    cards: [],\n    statuses : [\"to validate\", \"to do\", \"doing\", \"done\"]\n  };\n\n  componentWillMount() {\n    axios\n      .get(\"http://localhost:3333/all\")\n      .then(response => {\n        console.log(\"response usercards\", response);\n        this.setState({\n          cards: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  handleDelete = id => {\n    console.log(id);\n    axios\n      .delete(`http://localhost:3333/${id}`, {})\n      .then(response => {\n        alert(\"card deleted\");\n        this.componentWillMount();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  changeStatus = (cardId) => {\n    var statusCard;\n    this.setState({\n      cards: this.state.cards.map(x => {\n        const previousIndex = this.state.statuses.findIndex(y => y === x.status)\n        if (cardId === x._id) {\n          \n        }\n        return cardId === x._id \n        ? { ...x, status: this.state.statuses[(previousIndex+1)%4] }\n        :x \n      })\n    }, () => {\n      axios\n      .put(`http://localhost:3333/${cardId}`, { status : statusCard  })\n      .then(response => {\n        console.log(\"card updated posted to back, la réponse\", response);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    })\n  };\n\n\n  render() {\n    const displayStatus = {};\n    this.state.statuses.forEach(status => {\n      displayStatus[status] = this.state.cards\n        .filter(card => card.status === status)\n        .map(card => (\n          <UserCard\n            key={card._id}\n            id={card._id}\n            title={card.title}\n            text={card.text}\n            status={card.status}\n            onDelete={this.handleDelete}\n            changeStatus={this.changeStatus}\n          />\n        ));\n    });\n\n    return (\n      <div>\n        <AdminLayout />\n        <h2 style={{ fontFamily: \"Permanent Marker, cursive\" }}>Admin Cards</h2>\n\n        <Container>\n          <Grid>\n          {this.state.statuses.map((status, index) => {\n              return (\n              <Cell className=\"column\" id={index}>\n                {status.charAt(0).toUpperCase() + status.slice(1)}\n                {displayStatus[status]}\n             </Cell>\n            )})\n          }\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default AdminCards;\n"]},"metadata":{},"sourceType":"module"}